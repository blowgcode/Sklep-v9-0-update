<?php use Tpay\OpenApi\Locale\Lang; ?>
<link rel="stylesheet" type="text/css" href="<?php echo $data['static_files_url'] ?>View/Styles/style.css"/>
<div class="tpay-insidebg" id="chbs-tpay-payment">
    <div id="groups_v" class="tpay-panel-inside-content">
        <div id="bank-selection-form" class="tpay-groups-wrapper">
            <?php foreach ($data['groups_list'] as $group) { ?>
                <div class="tpay-group-holder tpay-with-logo" data-tpay-group-id="<?php echo $group['id'] ?>">
                    <div class="tpay-group-name"><?php echo $group['name'] ?></div>
                    <div class="tpay-group-logo-holder">
                        <?php if (!empty($group['img'])) { ?>
                            <img src="<?php echo $group['img'] ?>" class="tpay-group-logo" alt="<?php echo $group['name'] ?>">
                        <?php } ?>
                    </div>
                </div>
            <?php } ?>
        </div>
    </div>
</div>
<input name="<?php CHBSHelper::getFormName('payment_tpay_group_id'); ?>" id="chbs-tpay-group-id" type="hidden"/>
<script type="text/javascript">
    (function () {
        var input = document.getElementById('chbs-tpay-group-id');
        if (!input) {
            return;
        }
        var groups = document.querySelectorAll('#chbs-tpay-payment .tpay-group-holder');
        groups.forEach(function (group) {
            group.addEventListener('click', function () {
                var active = document.querySelector('#chbs-tpay-payment .tpay-active');
                if (active) {
                    active.classList.remove('tpay-active');
                }
                group.classList.add('tpay-active');
                input.value = group.getAttribute('data-tpay-group-id');
            });
        });
    })();
</script>
